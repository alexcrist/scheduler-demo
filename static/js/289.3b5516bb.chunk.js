!function(){"use strict";var e={289:function(e,t,n){var r=n(165),a=n(861),f=n(763),o=n.n(f),s=n(426),i=n.n(s),u="NUM_CALCULATIONS",c="RESULT",l=i()().format("YYYY"),d=("".concat(l,"-06-01"),"".concat(l,"-08-31"),n(671)),h=n(144),v={},p=function(e,t){var n="".concat(e," - ").concat(t);if(!(n in v)){var r=i()(e).diff(i()(t),"days");v[n]=r}return v[n]},y=function(e,t){for(var n=[],r=0;r<t.length;r++)n.push(0);for(var a=0,f=0;f<e.length;f++)for(var o=e[f],s=0;s<t.length;s++){var i=t[s];if(0!==i.length){for(var u=i[n[s]];n[s]<i.length-1&&u<o;)n[s]++,u=i[n[s]];u===o&&a++}}return a},g=function(){function e(){(0,d.Z)(this,e),this.lastMoveDescription="",this.jobs=[],this.staff=[],this.staffBreaks=[],this.settings={},this.dateToIndexMap={},this.jobIdMap={},this.personIdMap={},this.personToDaysOffMap={},this.numQualifiedOnDutyMap={}}return(0,h.Z)(e,[{key:"initEmptySchedule",value:function(e,t,n,r,a){var f=this;this.jobs=n,this.staff=r,this.settings=a,this.staffBreaks=function(e,t){for(var n=[],r=i()(e),a=i()(t);r<=a;)n.push(r.format("YYYY-MM-DD")),r.add(1,"day");return n}(e,t).map((function(e){return{date:e,staffOnBreak:[]}})),this.staffBreaks.forEach((function(e,t){f.dateToIndexMap[e.date]=t})),this.jobs.forEach((function(e){f.jobIdMap[e.id]=e,f.numQualifiedOnDutyMap[e.id]={},e.dateRequirements.forEach((function(t){f.numQualifiedOnDutyMap[e.id][t]=0}))})),this.staff.forEach((function(e){f.personIdMap[e.id]=e,f.personToDaysOffMap[e.id]=[],e.jobs.forEach((function(t){Object.keys(f.numQualifiedOnDutyMap[t]).forEach((function(n){e.startDate<=n&&e.endDate>=n&&(f.numQualifiedOnDutyMap[t][n]+=1)}))}))}))}},{key:"clone",value:function(){var t=new e;return t.jobs=this.jobs,t.staff=this.staff,t.settings=this.settings,t.staffBreaks=o().cloneDeep(this.staffBreaks),t.dateToIndexMap=this.dateToIndexMap,t.jobIdMap=this.jobIdMap,t.personIdMap=this.personIdMap,t.personToDaysOffMap=o().cloneDeep(this.personToDaysOffMap),t.numQualifiedOnDutyMap=o().cloneDeep(this.numQualifiedOnDutyMap),t}},{key:"getDay",value:function(e){var t=this.dateToIndexMap[e];return this.staffBreaks[t]}},{key:"getPerson",value:function(e){return this.personIdMap[e]}},{key:"getDaysOff",value:function(e){return this.personToDaysOffMap[e]}},{key:"getNumQualifiedOnDutyStaff",value:function(e,t){return this.numQualifiedOnDutyMap[e][t]}},{key:"addDayOff",value:function(e,t){var n=this;this.personToDaysOffMap[e].push(t),this.personToDaysOffMap[e].sort();var r=this.dateToIndexMap[t];this.staffBreaks[r].staffOnBreak.push(e),this.getPerson(e).jobs.forEach((function(e){t in n.numQualifiedOnDutyMap[e]&&(n.numQualifiedOnDutyMap[e][t]-=1)}))}},{key:"removeDayOff",value:function(e,t){var n=this;o().remove(this.personToDaysOffMap[e],(function(e){return e===t}));var r=this.dateToIndexMap[t];o().remove(this.staffBreaks[r].staffOnBreak,(function(t){return t===e})),this.getPerson(e).jobs.forEach((function(e){t in n.numQualifiedOnDutyMap[e]&&(n.numQualifiedOnDutyMap[e][t]+=1)}))}},{key:"moveDayOff",value:function(e,t,n){this.lastMoveDescription="Moving ".concat(this.personIdMap[e].name," from ").concat(t," to ").concat(n),this.removeDayOff(e,t),this.addDayOff(e,n)}}]),e}(),D=n(62),O=function(e,t){for(var n=(e.numDaysWorking-e.allottedDaysOff)/(e.allottedDaysOff+1),r=0,a=[e.dayBeforeFirstDay].concat((0,D.Z)(t.getDaysOff(e.id)),[e.dayAfterLastDay]),f=0;f<a.length-1;f++){var o=a[f],s=a[f+1];r+=Math.pow(p(s,o),2)}return Math.sqrt(Math.pow(n,2)*(a.length-1))/(r=Math.sqrt(r))*100},m=function(e,t){if(0===e.requestedDaysOff.length)return 100;var n=t.getDaysOff(e.id);return 100*y(n,[e.requestedDaysOff])/e.requestedDaysOff.length},M=function(e,t){if(0===e.friends.length)return 100;for(var n=0,r=0;r<e.friends.length;r++){var a=t.getPerson(e.friends[r]);n+=Math.min(e.allottedDaysOff,a.allottedDaysOff)}return 100*S(e,e.friends,t)/n},k=function(e,t){if(!e.bestFriend)return 100;var n=t.getPerson(e.bestFriend),r=Math.min(e.allottedDaysOff,n.allottedDaysOff);return 100*S(e,[e.bestFriend],t)/r},b=function(e,t){if(!e.enemy)return 100;var n=t.getPerson(e.enemy),r=Math.min(e.allottedDaysOff,n.allottedDaysOff);return 100-100*S(e,[e.enemy],t)/r},S=function(e,t,n){for(var r=n.getDaysOff(e.id),a=[],f=0;f<t.length;f++)a.push(n.getDaysOff(t[f]));return y(r,a)},B=0,j=function(){return B},I=function(e){B++;var t=e.settings,n=t.campScoreWeight,r=t.peopleScoreWeight,a=t.fairnessWeight,f=t.avgHappinessWeight,o=function(e){for(var t=e.settings,n=t.peopleClumpinessWeight,r=t.peopleFriendsWeight,a=t.peopleBestFriendWeight,f=t.peopleRequestedDaysOffWeight,o=t.peopleEnemyWeight,s=[],i=0;i<e.staff.length;i++){var u=e.staff[i],c=n*O(u,e),l=n;c+=r*M(u,e),l+=r,c+=a*k(u,e),l+=a,c+=o*b(u,e),l+=o,c+=f*m(u,e),c/=l+=f,s.push(c)}return s}(e),s=o.reduce((function(e,t){return e+t}),0)/o.length,i=a*o.reduce((function(e,t){return Math.min(e,t)}),o[0])+f*s;i/=a+f;var u=function(e){for(var t=0,n=0;n<e.jobs.length;n++)for(var r=e.jobs[n],a=0;a<r.dateRequirements.length;a++){var f=r.dateRequirements[a],o=e.getNumQualifiedOnDutyStaff(r.id,f);o>=r.numStaff?t+=100/e.jobs.length/r.dateRequirements.length:t+=100/e.jobs.length/r.dateRequirements.length*(o/r.numStaff)}return t}(e),c=n*u+r*i;return{peopleScores:o,campScore:u,overallScore:c/=n+r}};self.onmessage=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,f,o,s,i,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.data,a=n.startDate,f=n.endDate,o=n.jobs,s=n.staff,i=n.settings,u=T(a,f,o,s,i),self.postMessage({type:c,payload:u});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var x=function(e){self.postMessage({type:u,payload:e})},T=function(e,t,n,r,a){B=0;var f=new g;return f.initEmptySchedule(e,t,n,r,a),f=w(f),{schedule:f=Q(f),scores:I(f)}},w=function(e){for(var t=e.staff.reduce((function(e,t){return e+t.allottedDaysOff}),0),n=0,r=I(e);n<t;){x(j());for(var a=q(r),f=void 0,o=0;o<a.length;o++){var s=a[o];if(f=e.staff[s],e.getDaysOff(f.id).length<f.allottedDaysOff)break}var i=P(e,f);e=i.schedule,r=i.scores,n++}return e},Q=function(e){for(var t=I(e);;){x(j());var n=E(e,t),r=n.isBetter,a=n.newSchedule,f=n.newScores;if(!r)return e;e=a,t=f}},E=function(e,t){for(var n=q(t),r=[W,F,Y],a=0;a<n.length;a++)for(var f=n[a],o=e.staff[f],s=0;s<r.length;s++){var i=(0,r[s])(e,o);if(i.scores.overallScore>t.overallScore)return{isBetter:!0,newSchedule:i.schedule,newScores:i.scores}}return{isBetter:!1}},q=function(e){for(var t=[],n=0;n<e.peopleScores.length;n++)t.push({score:e.peopleScores[n],personIndex:n});t=o().sortBy(t,(function(e){return e.score}));for(var r=[],a=0;a<t.length;a++)r.push(t[a].personIndex);return r},P=function(e,t){var n={overallScore:-1},r=null,a=e.getDaysOff(t.id);if(a.length<t.allottedDaysOff)for(var f=0;f<e.staffBreaks.length;f++){var o=e.staffBreaks[f];if(!a.includes(o.date)&&t.startDate<=o.date&&t.endDate>=o.date){var s=e.clone();s.addDayOff(t.id,o.date);var i=I(s);i.overallScore>n.overallScore&&(n=i,r=s)}}return{scores:n,schedule:r}},W=function(e,t){for(var n={overallScore:-1},r=null,a=e.getDaysOff(t.id),f=0;f<a.length;f++)for(var o=a[f],s=0;s<e.staffBreaks.length;s++){var i=e.staffBreaks[s].date;if(o!==i&&!a.includes(i)&&i>=t.startDate&&i<=t.endDate){var u=e.clone();u.moveDayOff(t.id,o,i);var c=I(u);c.overallScore>n.overallScore&&(n=c,r=u)}}return{scores:n,schedule:r}},F=function(e,t){for(var n={overallScore:-1},r=null,a=e.getDaysOff(t.id),f=0;f<a.length;f++)for(var o=a[f],s=0;s<e.staff.length;s++){var i=e.staff[s];if(t.id!==i.id)for(var u=e.getDaysOff(i.id),c=0;c<u.length;c++){var l=u[c];if(o!==l&&!a.includes(l)&&!u.includes(o)&&l>=t.startDate&&l<=t.endDate&&o>=i.startDate&&o<=i.endDate){var d=e.clone();d.moveDayOff(t.id,o,l),d.moveDayOff(i.id,l,o);var h=I(d);h.overallScore>n.overallScore&&(n=h,r=d)}}}return{scores:n,schedule:r}},Y=function(e,t){for(var n={overallScore:-1},r=null,a=e.getDaysOff(t.id),f=0;f<a.length;f++)for(var o=a[f],s=e.getDay(o),i=0;i<e.staffBreaks.length;i++){var u=e.staffBreaks[i];if(s.date!==u.date&&R(s.date,u.staffOnBreak,e)&&R(u.date,s.staffOnBreak,e)){for(var c=e.clone(),l=0;l<s.staffOnBreak.length;l++){var d=s.staffOnBreak[l];c.moveDayOff(d,s.date,u.date)}for(var h=0;h<u.staffOnBreak.length;h++){var v=u.staffOnBreak[h];c.moveDayOff(v,u.date,s.date)}var p=I(c);p.overallScore>n.overallScore&&(n=p,r=c)}}return{scores:n,schedule:r}},R=function(e,t,n){for(var r=0;r<t.length;r++){var a=n.getPerson(t[r]);if(a.startDate>e||a.endDate<e)return!1}return!0}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var f=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(f.exports,f,f.exports,n),f.loaded=!0,f.exports}n.m=e,n.x=function(){var e=n.O(void 0,[10],(function(){return n(289)}));return e=n.O(e)},function(){var e=[];n.O=function(t,r,a,f){if(!r){var o=1/0;for(c=0;c<e.length;c++){r=e[c][0],a=e[c][1],f=e[c][2];for(var s=!0,i=0;i<r.length;i++)(!1&f||o>=f)&&Object.keys(n.O).every((function(e){return n.O[e](r[i])}))?r.splice(i--,1):(s=!1,f<o&&(o=f));if(s){e.splice(c--,1);var u=a();void 0!==u&&(t=u)}}return t}f=f||0;for(var c=e.length;c>0&&e[c-1][2]>f;c--)e[c]=e[c-1];e[c]=[r,a,f]}}(),n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".90da5863.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.p="/scheduler-demo/",function(){var e={289:1};n.f.i=function(t,r){e[t]||importScripts(n.p+n.u(t))};var t=self.webpackChunkcamp_react=self.webpackChunkcamp_react||[],r=t.push.bind(t);t.push=function(t){var a=t[0],f=t[1],o=t[2];for(var s in f)n.o(f,s)&&(n.m[s]=f[s]);for(o&&o(n);a.length;)e[a.pop()]=1;r(t)}}(),function(){var e=n.x;n.x=function(){return n.e(10).then(e)}}();n.x()}();
//# sourceMappingURL=289.3b5516bb.chunk.js.map