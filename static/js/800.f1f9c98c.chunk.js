!function(){"use strict";var t={800:function(t,e,n){var a=n(165),r=n(861),f=n(683),o="ALL_DAYS",s="NUM_CALCULATIONS",u="RESULT",i=n(426),c=n.n(i),d=function(t,e){for(var n=[],a=c()(t),r=c()(e);a<=r;)n.push(a.format("YYYY-MM-DD")),a.add(1,"day");return n},l={},p=function(t,e){var n="".concat(t," - ").concat(e);if(!(n in l)){var a=c()(t).diff(c()(e),"days");l[n]=a}return l[n]},h=function(t,e){return function(n){var a=n.type,r=n.numStaff;if(a===o)return d(t,e).map((function(t){return{date:t,numStaff:r}}))}},y=function(t){return t[0]},v=n(671),D=n(144),m=n(763),O=n.n(m),M=function(){function t(){(0,v.Z)(this,t),this.jobs=[],this.staff=[],this.staffBreaks=[],this.numDaysOfCamp=0,this.dayBeforeFirstDay=null,this.dayAfterLastDay=null,this.dateToIndexMap={},this.jobIdMap={},this.personIdMap={},this.personToDaysOffMap={},this.numQualifiedOnDutyMap={}}return(0,D.Z)(t,[{key:"initEmptySchedule",value:function(t,e,n,a){var r=this;this.jobs=n,this.staff=a,this.numDaysOfCamp=c()(e).diff(c()(t),"days")+1,this.dayBeforeFirstDay=c()(t).subtract(1,"day").format("YYYY-MM-DD"),this.dayAfterLastDay=c()(e).add(1,"day").format("YYYY-MM-DD"),this.staffBreaks=d(t,e).map((function(t){return{date:t,staffOnBreak:[]}})),this.staffBreaks.forEach((function(t,e){r.dateToIndexMap[t.date]=e})),this.jobs.forEach((function(t){r.jobIdMap[t.id]=t,r.numQualifiedOnDutyMap[t.id]={},t.dateRequirements.forEach((function(e){r.numQualifiedOnDutyMap[t.id][e.date]=0}))})),this.staff.forEach((function(t){r.personIdMap[t.id]=t,r.personToDaysOffMap[t.id]=[],t.jobs.forEach((function(t){Object.keys(r.numQualifiedOnDutyMap[t]).forEach((function(e){r.numQualifiedOnDutyMap[t][e]+=1}))}))}))}},{key:"clone",value:function(){var e=new t;return e.jobs=this.jobs,e.staff=this.staff,e.numDaysOfCamp=this.numDaysOfCamp,e.dayBeforeFirstDay=this.dayBeforeFirstDay,e.dayAfterLastDay=this.dayAfterLastDay,e.staffBreaks=O().cloneDeep(this.staffBreaks),e.dateToIndexMap=this.dateToIndexMap,e.jobIdMap=this.jobIdMap,e.personIdMap=this.personIdMap,e.personToDaysOffMap=O().cloneDeep(this.personToDaysOffMap),e.numQualifiedOnDutyMap=O().cloneDeep(this.numQualifiedOnDutyMap),e}},{key:"getDay",value:function(t){var e=this.dateToIndexMap[t];return this.staffBreaks[e]}},{key:"getPerson",value:function(t){return this.personIdMap[t]}},{key:"getDaysOff",value:function(t){return this.personToDaysOffMap[t]}},{key:"getNumQualifiedOnDutyStaff",value:function(t,e){return this.numQualifiedOnDutyMap[t][e]}},{key:"addDayOff",value:function(t,e){var n=this;this.personToDaysOffMap[t].push(e),this.personToDaysOffMap[t]=this.personToDaysOffMap[t].sort();var a=this.dateToIndexMap[e];this.staffBreaks[a].staffOnBreak.push(t),this.getPerson(t).jobs.forEach((function(t){e in n.numQualifiedOnDutyMap[t]&&(n.numQualifiedOnDutyMap[t][e]-=1)}))}},{key:"removeDayOff",value:function(t,e){var n=this;O().remove(this.personToDaysOffMap[t],(function(t){return t===e}));var a=this.dateToIndexMap[e];O().remove(this.staffBreaks[a].staffOnBreak,(function(e){return e===t})),this.getPerson(t).jobs.forEach((function(t){e in n.numQualifiedOnDutyMap[t]&&(n.numQualifiedOnDutyMap[t][e]+=1)}))}},{key:"moveDayOff",value:function(t,e,n){this.removeDayOff(t,e),this.addDayOff(t,n)}}]),t}(),g=n(785),k=function(t,e){for(var n=(e.numDaysOfCamp-t.allottedDaysOff)/(t.allottedDaysOff+1),a=0,r=[e.dayBeforeFirstDay].concat((0,g.Z)(e.getDaysOff(t.id)),[e.dayAfterLastDay]),f=0;f<r.length-1;f++){var o=r[f],s=r[f+1];a+=Math.pow(p(s,o),2)}return Math.sqrt(Math.pow(n,2)*(r.length-1))/(a=Math.sqrt(a))*100},b=0,j=function(){return b},S=function(t){b++;var e=function(t){for(var e=[],n=0;n<t.staff.length;n++){var a=t.staff[n],r=k(a,t);e.push(r)}return e}(t),n=e.reduce((function(t,e){return t+e}),0)/e.length,a=.5*e.reduce((function(t,e){return Math.min(t,e)}),e[0])+.5*n,r=function(t){for(var e=0,n=0;n<t.jobs.length;n++)for(var a=t.jobs[n],r=0;r<a.dateRequirements.length;r++){var f=a.dateRequirements[r],o=f.date,s=f.numStaff,u=t.getNumQualifiedOnDutyStaff(a.id,o);e+=u>=s?100/t.jobs.length/a.dateRequirements.length:100/t.jobs.length/a.dateRequirements.length*(u/s)}return e}(t);return{peopleScores:e,campScore:r,overallScore:.999*r+.001*a}};self.onmessage=function(){var t=(0,r.Z)((0,a.Z)().mark((function t(e){var n,r,f,o,s,i;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.data,r=n.startDate,f=n.endDate,o=n.jobs,s=n.staff,i=T(r,f,o,s),self.postMessage({type:u,payload:i});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();var B=function(t){self.postMessage({type:s,payload:t})},T=function(t,e,n,a){b=0;var r=function(t,e,n){for(var a=[],r=0;r<n.length;r++)a.push((0,f.Z)({},n[r])),a[r].dateRequirements=n[r].staffRequirements.map(h(t,e)),a[r].dateRequirements=y(a[r].dateRequirements);return a}(t,e,n),o=function(t){return t.map((function(t){return(0,f.Z)((0,f.Z)({},t),{},{allottedDaysOff:4})}))}(a),s=new M;return s.initEmptySchedule(t,e,r,o),s=x(s),{schedule:s=I(s),scores:S(s)}},x=function(t){for(var e=t.staff.reduce((function(t,e){return t+e.allottedDaysOff}),0),n=0;n<e;)B(j()),t=w(t).schedule,n++;return t},I=function(t){for(var e=S(t);;){B(j());for(var n=1e3,a=-1,r=0;r<e.peopleScores.length;r++){var f=e.peopleScores[r];f<n&&(n=f,a=r)}var o=t.staff[a],s=Q(t,o);if(!(s.scores.overallScore>e.overallScore))return t;t=s.schedule,e=s.scores}},w=function(t){for(var e={overallScore:-1},n=null,a=0;a<t.staff.length;a++){var r=t.staff[a],f=t.getDaysOff(r.id);if(f.length<r.allottedDaysOff)for(var o=0;o<t.staffBreaks.length;o++){var s=t.staffBreaks[o];if(!f.includes(s.date)){var u=t.clone();u.addDayOff(r.id,s.date);var i=S(u);i.overallScore>e.overallScore&&(e=i,n=u)}}}return{scores:e,schedule:n}},Q=function(t,e){for(var n={overallScore:-1},a=null,r=t.getDaysOff(e.id),f=0;f<r.length;f++)for(var o=r[f],s=0;s<t.staffBreaks.length;s++){var u=t.staffBreaks[s].date;if(o!==u&&!r.includes(u)){var i=t.clone();i.moveDayOff(e.id,o,u);var c=S(i);c.overallScore>n.overallScore&&(n=c,a=i)}}return{scores:n,schedule:a}}}},e={};function n(a){var r=e[a];if(void 0!==r)return r.exports;var f=e[a]={id:a,loaded:!1,exports:{}};return t[a].call(f.exports,f,f.exports,n),f.loaded=!0,f.exports}n.m=t,n.x=function(){var t=n.O(void 0,[94],(function(){return n(800)}));return t=n.O(t)},function(){var t=[];n.O=function(e,a,r,f){if(!a){var o=1/0;for(c=0;c<t.length;c++){a=t[c][0],r=t[c][1],f=t[c][2];for(var s=!0,u=0;u<a.length;u++)(!1&f||o>=f)&&Object.keys(n.O).every((function(t){return n.O[t](a[u])}))?a.splice(u--,1):(s=!1,f<o&&(o=f));if(s){t.splice(c--,1);var i=r();void 0!==i&&(e=i)}}return e}f=f||0;for(var c=t.length;c>0&&t[c-1][2]>f;c--)t[c]=t[c-1];t[c]=[a,r,f]}}(),n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},n.f={},n.e=function(t){return Promise.all(Object.keys(n.f).reduce((function(e,a){return n.f[a](t,e),e}),[]))},n.u=function(t){return"static/js/"+t+".f84c3752.chunk.js"},n.miniCssF=function(t){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t},n.p="/scheduler-demo/",function(){var t={800:1};n.f.i=function(e,a){t[e]||importScripts(n.p+n.u(e))};var e=self.webpackChunkcamp_react=self.webpackChunkcamp_react||[],a=e.push.bind(e);e.push=function(e){var r=e[0],f=e[1],o=e[2];for(var s in f)n.o(f,s)&&(n.m[s]=f[s]);for(o&&o(n);r.length;)t[r.pop()]=1;a(e)}}(),function(){var t=n.x;n.x=function(){return n.e(94).then(t)}}();n.x()}();
//# sourceMappingURL=800.f1f9c98c.chunk.js.map